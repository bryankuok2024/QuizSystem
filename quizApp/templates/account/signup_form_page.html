{# quizApp/templates/account/signup_form_page.html #}
{% extends "base.html" %}
{% load i18n %}
{% load allauth account %} {# Removed socialaccount as it's not primary here #}

{% block title %}{% trans "建立你的帳戶" %}{% endblock %}

{% block extra_css %}
<style>
  body { background-color: #ffffff; color: #212529; margin: 0; }
  main.container { display: flex; align-items: center; justify-content: center; min-height: 100vh; margin-top: 0 !important; max-width: none; padding: 0; }
  .auth-form-container { max-width: 480px; width: 100%; padding: 2rem; background-color: #ffffff; border-radius: 8px; box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15); }
  .auth-form-title { font-size: 2rem; font-weight: bold; margin-bottom: 1.5rem; text-align: center; color: #212529; }
  .form-group { margin-bottom: 1rem; }
  .form-group label { display: block; margin-bottom: .5rem; font-weight: 500; }
  .form-control { display: block; width: 100%; padding: .375rem .75rem; font-size: 1rem; line-height: 1.5; color: #495057; background-color: #fff; background-clip: padding-box; border: 1px solid #ced4da; border-radius: .25rem; transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out; box-sizing: border-box; }
  .form-control:focus { color: #495057; background-color: #fff; border-color: #80bdff; outline: 0; box-shadow: 0 0 0 .2rem rgba(0,123,255,.25); }
  .auth-submit-btn { width: 100%; padding: 0.75rem; font-size: 1.1rem; color: #fff; background-color: #007bff; border-color: #007bff; border-radius: 25px; cursor: pointer; }
  .auth-submit-btn:hover { background-color: #0056b3; border-color: #0056b3; }
  .help-text { font-size: 0.875em; color: #6c757d; margin-top: .25rem; }
  .alert ul { list-style: none; padding-left: 0; margin-bottom: 0; }
  .alert-danger { color: #721c24; background-color: #f8d7da; border-color: #f5c6cb; padding: .75rem 1.25rem; margin-bottom: 1rem; border: 1px solid transparent; border-radius: .25rem; }
  nav.navbar, footer { display: none !important; }
</style>
{% endblock %}

{% block content %}
<div class="auth-form-container">
    <h1 class="auth-form-title">{% trans "建立你的帳戶" %}</h1>
    <form method="post" action="{% url 'account_signup' %}" class="signup">
        {% csrf_token %}

        {% if form.non_field_errors %}
            <div class="alert alert-danger">
                {{ form.non_field_errors }}
            </div>
        {% endif %}

        {% for field in form %}
            <div class="form-group">
                <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                {{ field }} 
                {% if field.help_text %}
                    <small class="help-text">{{ field.help_text }}</small>
                {% endif %}
                {% for error in field.errors %}
                    <div class="alert alert-danger" style="margin-top: .25rem; padding: .25rem .5rem; font-size: 0.8em;">{{ error }}</div>
                {% endfor %}
            </div>
        {% endfor %}
        
        {% if redirect_field_value %}
            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
        {% endif %}
        
        <button type="submit" class="auth-submit-btn">{% trans "同意並註冊" %}</button>
    </form>
    <p style="text-align:center; margin-top:1rem;">
        <a href="{% url 'signup_options' %}">{% trans "返回其他註冊選項" %}</a>
    </p>
</div>
{% endblock %}

{% block extra_script %}
<script>
// Add 'form-control' class to all relevant input fields for styling
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form.signup');
    if (form) {
        form.querySelectorAll('input[type="text"], input[type="email"], input[type="password"], select, textarea').forEach(function(field) {
            if (!field.classList.contains('form-control')) {
                field.classList.add('form-control');
            }
        });
    }
});
</script>
{% endblock %} 